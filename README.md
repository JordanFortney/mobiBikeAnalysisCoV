# Popular Routes and Station Route Diversity of Mobi Bikes in Vancouver

#### Original Data: 
https://www.mobibikes.ca/en/system-data
https://vancouver-gbfs.smoove.pro/gbfs/en/station_information.json

### Abstract: 

Mobi Bikes provides accessible and affordable public bicycles available for shared use all across Vancouver. These bikes can be unlocked from stations distributed across the city and must be returned to any station once your trip has been completed. The most popular routes are composed of stations situated within Stanley Park. These results are consistent throughout the past 4 years and across all months and periods of the week although the popularity of certain routes within the downtown core do increase during the winter months. The metric that has the greatest effect on route popularity is the membership type of the rider. Routes including stations within Stanley Park are dominated by Day Pass riders while those within the downtown core are most popular with riders who possess Month or Annual passes. It was assumed the relatively low route diversity of the Stanley Park stations was contributing to the popularity of their routes but that is not supported by a low correlation coefficient of -0.27. Other factors such as: proximity to points of interest, whether the station is located in a recreational or business environment, or the amount of foot traffic past the stations should be analysed to determine their effect on route popularity and station diversity in the future.

#### Tableau - Visualization: https://public.tableau.com/views/PopularRoutesandStationRouteDiversityofMobiBikesinVancouver/Dashboard1?:language=en-US&:display_count=n&:origin=viz_share_link

<div class='tableauPlaceholder' id='viz1623881817796' style='position: relative'><noscript><a href='#'><img alt='Dashboard 1 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Po&#47;PopularRoutesandStationRouteDiversityofMobiBikesinVancouver&#47;Dashboard1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='PopularRoutesandStationRouteDiversityofMobiBikesinVancouver&#47;Dashboard1' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Po&#47;PopularRoutesandStationRouteDiversityofMobiBikesinVancouver&#47;Dashboard1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-US' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1623881817796');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.minWidth='1000px';vizElement.style.maxWidth='2000px';vizElement.style.width='100%';vizElement.style.minHeight='727px';vizElement.style.maxHeight='1427px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.minWidth='1000px';vizElement.style.maxWidth='2000px';vizElement.style.width='100%';vizElement.style.minHeight='727px';vizElement.style.maxHeight='1427px';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';} else { vizElement.style.width='100%';vizElement.style.height='1577px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>

### Summary of Data Exploration

#### Errors and Missing Data:
The Mobi Bike data was openly available from their website dating back through 2017. The data was provided in multiple formats which was handled by converting all files to .csv and then combining them into one large dataframe. This resulted in the first major hurdle encountered during the exploratory data analysis of this project. There is no standardized feature naming convention in place for the Mobi dataset. For example: “Membership Type” and “Membership type” represent the same data but are recognized as separate features due to inconsistent spelling in multiple datasets. To handle these inconsistencies, all the feature titles used in the raw data were analysed and grouped by the data they represented. One naming convention was selected per group and then a script was written to standardize all the feature names while importing the data to the dataframe. The remaining null values were then handled by completely dropping features where over 80% of the data was missing and dropping individual records containing any remaining null values which made up less than 0.1% of the total data. 

#### Transformations and Joins:
Various transformations were then performed on the remaining 10 features to further standardize the dataset. Some of these transformations included separating the numeric and alpha station IDs into their own features as well as converting the departure and return dates to a consistent format. Additionally there were almost 30 unique membership types included in the original data. These were grouped into 3 categories (Day, Month, and Annual passes) so that they can be easily compared and contrasted. Outliers were handled by removing any records containing data that fell above the 95th percentile for covered distance and duration. This was done to ensure that the data being analyzed was truly representative of trips we’re likely to encounter under normal circumstances. 

#### Geospatial Data Assembly:
The trips geospatial dataframe was built by combining portions of the larger Mobi dataframe ,described above, and the station information json file provided by Mobi Bikes. A new Trips dataframe was created which only contained station and date related features. From this new dataframe, a Path_ID feature was made by combining the departure and return stations plus a delimiter. This feature represents all the possible routes from one station to another. This Trips dataframe was then manipulated and joined with the latitude and longitude data on the numeric station_id. The resulting dataframe contains the geospatial coordinates for the departure and return station for every Mobi Bikes trip made since the beginning of 2017. 

#### Common Issues:
The most common issue that was encountered with the data was the inconsistency of the formatting and entry. The lack of formalized data standards resulted in individual features being named up to 3 different ways each. Data cleaning can be tedious and time consuming which is why it is very often automated for datasets that are added to on a regular basis. Without strict standards and guidelines for feature names and other structural aspects such as file type automation is impossible and therefore resources need to be expended to oversee those operations. 

### Conclusions: Insights from Analysis

To determine the most popular routes it is as straightforward as counting the number of occurrences each path_id had within the final dataframe. These results can then be ranked and sorted to show which departure station - return station combination (Path_ID) is the most popular. 

Eight of the top 10 most popular routes are composed of stations situated within Stanley Park. The route from Stanley Park - Information Booth -> Stanley Park - Totem Poles being the route with the highest number of trips by a large margin at 14,832. Stanley Park stations are consistently the most popular throughout the past 4 years and across all months of the year and periods of the week. Popularity of certain routes within the downtown core, specifically Bute & Davie -> Bute & Robson, do increase during the winter months. 

The metric that has the greatest effect on route popularity is the membership type of the rider. Routes including stations within Stanley Park are dominated by Day Pass riders while those within the downtown core are most popular with riders who possess an Annual Pass. This makes sense as the stations within the downtown core are more likely to be used by commuters and therefore on a regular basis justifying the purchase of a more expensive membership. 

Station diversity is a measure of how many unique routes a specific station belongs to. The stations with the most diversity tend to be within the downtown core or near the Seawall. The number of nearby stations and/or points of interest (i.e. Granville Island) offer lots of options to begin or end a trip resulting in stations with high route diversity. High usage paired with limited stations to depart from and return to should be the perfect recipe for creating very popular routes. That being said, the correlation between Route Popularity and Route Diversity is actually quite low at -0.27. The negative aspect of the coefficient does indicate that as diversity increases, popularity decreases and vice-versa.
To expand on this analysis it would be interesting to know the number of empty bike slots at the time of departure and return. With this information the analysis could be expanded to determine whether or not the average number of available bicycles or empty slots has an effect on route popularity. I assume stations with few available bikes or few empty slots would see lower popularity and diversity due to users not being able to start or end a route there. 

### Conclusions:
Stanley Park is an expansive recreational area and the perfect environment for short one-way bicycle rides and features the most popular routes for Mobi Bike rides in vancouver. It comes as no surprise that the most popular routes for riders with Daily passes are found in beautiful recreational areas while riders with Annual passes use the routes within the downtown core. The diversity of stations does not play a large role in determining which routes are popular. More data and analysis is needed to pinpoint the exact factors that contribute to stations being popular. Future analysis should be focused around proximity to points of interest, whether the surrounding area is recreational or not, and/or the level of foot traffic surrounding departure stations. 